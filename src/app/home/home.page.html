<ion-header>
  <ion-toolbar>
    <ion-title>{{ appName }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="openSettings()">
        <ion-icon name="settings-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div class="main-container">
    <!-- Connection Status -->
    <app-connection-status [connectionState]="connectionState" [errorMessage]="errorMessage">
    </app-connection-status>

    <!-- Water Tank and Info Section -->
    <div class="water-section">
      <!-- Water Tank Indicator - Only show when we have a water level value -->
      <app-water-tank *ngIf="currentWaterLevel !== null" [waterLevel]="currentWaterLevel" [isChecking]="isChecking">
      </app-water-tank>

      <!-- Last Update Info -->
      <div class="info-card" *ngIf="lastUpdate">
        <ion-icon name="time-outline"></ion-icon>
        <span>Last updated: {{ getFormattedTime(lastUpdate) }}</span>
      </div>
    </div>

    <!-- Control Buttons -->
    <div class="controls">
      <ion-button expand="block" size="large" [disabled]="isChecking" (click)="checkWaterLevel()" class="check-button">
        <ion-icon name="water-outline" slot="start"></ion-icon>
        Check Water Level
      </ion-button>

      <ion-button fill="outline" expand="block" [disabled]="isChecking" (click)="refreshStatus()"
        class="refresh-button">
        <ion-icon name="refresh-outline" slot="start"></ion-icon>
        Device Status
      </ion-button>
    </div>

  </div>
</ion-content>